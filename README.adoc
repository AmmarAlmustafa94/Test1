= Programmierpraktikum I: √úbung 1 
:icons: font
:icon-set: fa
:source-highlighter: rouge
ifdef::env-github[]
:tip-caption: :bulb:
:note-caption: :information_source:
:important-caption: :heavy_exclamation_mark:
:caution-caption: :fire:
:warning-caption: :warning:
endif::[]
:experimental:

[quote, Rich Hickey]
Programming is not about typing, it's about thinking.


== Vertiefung `git`

Vorab: Welches Betriebssystem Sie hier verwenden, spielt in diesem Semester keine gro√üe Rolle. Da es aber viele verschiedene Kombinationen gibt, k√∂nnen wir leider nur sehr begrenzt bei technischen Fragen helfen. Wir setzen voraus, dass Sie sich selbst mit Ihrem System befassen und grundlegende Begriffe und Operationen erlernen und verstehen. Da wir uns am besten mit macOS und Linux auskennen, werden die Beispiele hier meistens f√ºr diese beiden Systeme geschrieben sein. Unter Windows bzw. dem WSL gibt es aber √§quivalente Befehle. 

Sie haben in der Vergangenheit beim Arbeiten an Code oder gemeinsamen Erstellen von Dokumenten vielleicht schon mal am Ende so etwas hier gehabt:

image::versionen.png[viele verschiedene Versionen mit unterschiedlichen Namen derselben Datei in einem Ordner]

Diese Art, verschiedene Versionen von Dateien zu verwalten und miteinander zu teilen wird sehr schnell un√ºbersichtlich: Welche √Ñnderungen gibt es wo von wem? Warum wurden die √Ñnderungen vorgenommen? Wie kann einfach eine √Ñnderungen zur√ºckgenommen werden?

Um diese Probleme bei der Softwareentwicklung zu vermeiden, wurden Versionskontrollsysteme erfunden. Heute wollen wir uns mit dem weit verbreiteten Versionskontrollsystem `git` genauer befassen, denn dieses Versionskontrollsystem wird uns sowohl in diesem als auch im n√§chsten Semester begleiten. Aber auch quasi immer, wenn Softwareentwickler:innen an Projekten arbeiten, wird ein Versionskontrollsystem eingesetzt.

Fangen wir ganz von vorne an.

== git konfigurieren

Stellen Sie zuerst Ihre Identit√§t ein. Diese Information wird sp√§ter mit jedem Commit (√Ñnderungssatz, ‚ÄûZwischenspeicherstand‚Äú) gespeichert, damit andere Teammitglieder nachvollziehen k√∂nnen, wer welche √Ñnderungen vergenommen hat:

[source, bash]
----
git config --global user.name "Ihr Name"
git config --global user.email vorname.nachname@hhu.de
----

NOTE: Wie die meisten Konsolen-Befehlen gibt `git config` nichts aus, wenn alles fehlerfrei funktioniert hat.

F√ºr einen sch√∂neren git Log (gucken wir uns weiter unten an), empfehlen wir den Alias `git lg` (bei Jens ist es als `git lol` abgespeichert) zu konfigurieren:

[source, bash]
----
git config --global alias.lg "log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit"
----

Mit dem Befehl `git lg` haben Sie dann sp√§ter eine sch√∂nere Darstellung des Git-Graphens.

== git Basics und Gitignore

TIP: F√ºhren Sie ab Schritt 2 nach jedem Schritt `git status` aus und schauen Sie sich an, was git Ihnen so erz√§hlt.

1. Erstellen Sie auf Ihrem Computer einen Ordner `uebung1` und wechseln Sie in diesen Ordner (`mkdir`, `cd`).
2. Initialisieren Sie ein git-Repository (`git init`).
3. Erstellen Sie eine Datei `README.adoc` und schreiben Sie `= Hallo :-)` in die Datei (Sie k√∂nnen daf√ºr irgendeinen Text-Editor nehmen).
4. Erstellen Sie eine zweite Datei `private.key` und schreiben Sie `geheim` in die Datei.
5. F√ºhren Sie `git status` aus. Was steht auf der Konsole? Verstehen Sie alles, was in der Ausgabe steht?
6. Wir wollen die Datei `private.key` nicht in unserem git-Repository versionieren. Damit niemand sie aus Versehen zum Repository hinzugef√ºgt und sp√§ter auf GitHub ver√∂ffentlicht, wollen wir diese Datei davor sch√ºtzen. Erstellen Sie eine `.gitignore`-Datei mit dem Inhalt `private.key`. Wie sieht nun die Ausgabe von `git status` aus?
+
NOTE: Dateien mit f√ºhrendem Punkt sind unter Unix-Systemen (macOS, Linux, ‚Ä¶) versteckt. Falls Sie die Datei nach dem Anlegen nicht sehen, m√ºssen Sie in Ihrem Dateimanager die Anzeige versteckter Dateien aktivieren oder auf der Konsole `ls` mit dem Parameter `-a` verwenden.

7. F√ºgen Sie die Datei `README.adoc` zur Staging-Area hinzu und erstellen Sie einen Commit mit einer aussagekr√§ftigen Nachricht (`git add`, `git commit`).
8. F√ºgen Sie nun noch die `.gitignore` zur Staging-Area und erstellen Sie einen Commit mit einer passenden Nachricht.
+
TIP: Commits und ihre beschreibenden Nachrichten helfen uns nachzuvollziehen, was wir in unserem Code ge√§ndert haben und erm√∂glichen es uns bei sauberem und gewissenhaftem Committen auch wieder zu bestimmten St√§nden zur√ºckzuspringen. Die Nachrichten sollten daher kurz und pr√§gnant sein und die √Ñnderung beschreiben. Beispielsweise ist ‚ÄûIgnore private.key file‚Äú ein beschreibender Titel. Nachrichten, wie ‚ÄûMinor change‚Äú oder √§hnliches sagen _nichts_ aus und sollten vermieden werden.
+
TIP: Mit einer gepflegten .gitignore-Datei k√∂nnen unliebsame Dateien von der Versionierung ausgeschlossen werden.

9. F√ºhren Sie `git push` aus. Welche Fehlermeldung erhalten Sie und warum?
10. Erstellen Sie ein privates Repository auf GitHub und nennen Sie es `uebung1`. Initialisieren Sie das Repo _ohne_ README, gitignore oder License-Datei. Sie werden auf eine Seite weitergeleitet mit weiteren Anleitungen.
11. F√ºhren Sie die drei Befehle aus ‚Äûor push an existing repository from the command line‚Äú in Ihrer Konsole aus.
+
IMPORTANT: F√ºhren Sie niemals blind irgendwelche Befehle auf der Konsole aus, von denen Sie nicht wissen, was sie tun. Stellen Sie immer zuerst sicher, dass Sie wissen, was ein Befehl macht. Schauen Sie im Zweifel im Handbuch nach (z.¬†B. mit dem Befehl `man git remote`).

12. Schauen Sie sich auf GitHub an, was Sie nun gepusht haben.
13. Mit `git lg` (alternativ: `git log`) sehen Sie auf der Konsole, welche Commits Sie nun erstellt (`HEAD`) und ver√∂ffentlicht (`origin/HEAD`) haben.

ü•≥ Sie haben nun die ersten Dateien gepusht, geheime Dateien werden nicht von git verwaltet und Sie k√∂nnen erfolgreich git verwenden!

=== Datei aus Staging Area entfernen

Dateien, die Sie aus Versehen mit `git add` zur Staging-Area hinzugef√ºgt und noch nicht committet haben, k√∂nnen Sie mit `restore` wieder aus dieser Staging Area entfernen.

1. √Ñndern Sie die Datei `README.adoc` und f√ºgen Sie irgendeine Zeile unten an.
2. Rufen Sie `git status` auf.
3. F√ºgen Sie die Datei zur Staging Area hinzu (`git add`).
4. Rufen Sie `git status` auf.
5. Folgen Sie der Anweisung von git, um die √Ñnderungen im Arbeitsbereich (= Staging Area) zu verwerfen (`git restore ‚Ä¶`).
6. Rufen Sie `git status` auf. Die Datei sollte nun nicht mehr zum Commit vorgemerkt sein.
7. Wenn Sie eine √Ñnderung an einer Datei noch nicht mit `git add` zur Staging Area hinzugef√ºgt haben, k√∂nnen Sie mit `git restore` die Datei wieder auf den Stand des letzten Commits zur√ºcksetzen.

=== Advanced: Commit-Nachrichten √§ndern

Commits sollten in der Regel nicht ver√§ndert werden. Wenn Sie den Commit aber noch nicht ver√∂ffentlicht haben (`git push`), dann k√∂nnen Sie einfach lokal noch √Ñnderungen vornehmen, beispielsweise einen Tippfehler in der Commit-Nachricht korrigieren:

1. F√ºgen Sie eine Zeile in die README.adoc-Datei ein: `echo "Huhu" >> README.adoc`
2. Erzeugen Sie einen Commit: `git add README.adoc && git commit -m "Extent README"`
3. Huch! `Extend` schreibt man doch mit `d`!
4. Rufen Sie `git commit --amend` auf.
5. √Ñndern Sie die Commit-Nachricht.
6. Schauen Sie im `git log` nach, ob die Nachricht ge√§ndert wurde.

TIP: `amend` ver√§ndert den Commit und erstellt einen neuen Hash (diese Hexadezimalzahl, die immer bei den Commits steht). Sollten Sie den Commit schon gepusht haben, so kann git diese √Ñnderungen nicht mehr ohne Probleme zusammenf√ºhren. Daher sollten Sie aufpassen, wann Sie Commit-ver√§ndernde Operationen durchf√ºhren.

=== Advanced: Zeitreisen f√ºr Einsteiger:innen

M√∂chten Sie auf einen Commit zur√ºckgehen, k√∂nnen sie diesen ‚Äûauschecken‚Äú (`git checkout`), also auf den Stand dieses Commits zur√ºckgehen. Dabei k√∂nnen Sie einen beliebigen Commit-Hash anspringen und schauen in welchem Zustand sich Ihr Projekt zu dieser Zeit befand.

1. F√ºhren Sie `git lg` aus.
2. Suchen Sie sich aus einen Commit-Hash in der Vergangenheit aus. Beispielsweise `bf1079e` aus diesem Beispiel
+
[source,bash]
----
uebung1 on main 
‚ùØ git lg
* 54568a5 - (HEAD -> main, origin/main) Rename file (vor 54 Minuten) <Christian Meter>
* 91fb12c - Ignore private.key (vor 86 Minuten) <Christian Meter>
* bf1079e - Initialize propra (vor 86 Minuten) <Christian Meter>
----

3. Springen Sie zu diesem Commit mit: `git checkout bf1079e`
4. Schauen Sie sich die Dateien in Ihrem aktuellen Verzeichnis an. Es sollte nun keine .gitignore mehr zu sehen sein.
5. Springen Sie zum aktuellsten Commit zur√ºck: `git checkout main`

TIP: Sie k√∂nnen auch Ihr lokales Repository hart auf einen Commit-Stand zur√ºcksetzen. Dabei gehen alle anderen Dateien verloren, die es zu dem Zeitpunkt noch nicht gab und von git erfasst wurden. Das funktioniert mit `git reset --hard <hash>`, aber beachten Sie dabei bitte unbedingt, dass Dateien und Ver√§nderungen verloren gehen k√∂nnen!!! Das ist wichtig zu wissen.

=== Advanced: Aus Versehen hinzugef√ºgte Dateien aus git wieder entfernen

Wurde aus Versehen eine Datei zum Repository hinzugef√ºgt, die nicht von git erfasst werden sollte, kann diese mit `git rm --cached <datei>` aus git gel√∂scht, aber lokal behalten werden. Probieren Sie das mit einer Datei `private2.key` aus, welche Sie zun√§chst hinzuf√ºgen und dann wieder aus git entfernen m√∂chten.

NOTE: Eine Datei aus der Commit-Hostorie zu entfernen ist schwieriger. Wir schauen uns das sp√§ter im Praktikum an, wenn wir uns mit weiteren Funktionen von git befassen.

== Git-Repositories klonen

Wir arbeiten fast ausschlie√ülich mit git, sei es zum praktischen Entwickeln von Software oder auch zum Zusammenstellen von Aufgaben f√ºr Sie. Daher erhalten Sie h√§ufig einen GitHub-Classroom-Link, der Sie zu einem git-Repository f√ºhrt. Diese Repos kann man auch lokal herunterladen und dort weiterarbeiten. 

1. √ñffnen Sie das Repository mit dieser Aufgabenbeschreibung in Ihrem Browser.
2. Suchen Sie den gr√ºnen CODE-Button auf der Webseite von GitHub.
3. Stellen Sie sicher, dass `SSH` ausgew√§hlt ist, und kopieren Sie die angezeigte Adresse.
4. Falls Sie noch im Ordner `uebung1` aus den vorherigen Schritten sind, so wechseln Sie verlassen Sie bitte das Verzeichnis und gehen Sie in einen anderen Ordner, bspw. in das √ºbergeordnete Verzeichnis. (`cd ..`)
5. Klonen Sie das Repository: `git clone <die Adresse aus Schritt 3>`, beispielsweise: `git clone git@github.com:hhu-propra1/uebung-1-ihrnutzername.git`
6. Sie haben nun das Repository lokal verf√ºgbar und k√∂nnen darin arbeiten. Mit `git log` sehen Sie die letzten Commits.


== Weiterf√ºhrende Themen

=== gitignore-Vorlagen

Es gibt allerlei Vorlagen zu gitignore-Dateien. Beispielsweise k√∂nnen Sie unter https://gitignore.io/ eine gitignore-Datei generieren lassen, die tempor√§re und automatisch generierte Dateien von Betriebssystemen, Editoren und Programmiersprachen beinhaltet. Diese k√∂nnen Sie als Basis f√ºr Ihr Projekt verwenden.

=== Git-Prompt

Sie haben bei manchen Entwickler:innen vielleicht schon gesehen, dass sich die Prompt (die Textzeile im Terminal, hinter der Befehle eingetippt werden) ver√§ndert, wenn das aktuelle Verzeichnis zu einem git-Repo geh√∂rt:

```
~/propra % cd uebung1
(main‚Üë1)~/propra/uebung1 %
```

In diesem Beispiel wird angezeigt, dass der aktuell gew√§hlte Branch `main` hei√üt und ein Commit noch nicht gepusht ist. Wie Sie das f√ºr Ihre Konsole einrichten, h√§ngt davon ab, welche Shell Sie verwenden (das ist grob gesagt das Programm, das innerhalb des Konsolenfensters ausgef√ºhrt ist und f√ºr das Entgegennehmen von Befehlen zust√§ndig ist); Sie k√∂nnen meistens mit `echo $SHELL` herausfinden, welche Shell Sie verwenden. Suchen Sie dann im Internet nach `git prompt <Name der Shell>`, um herauszufinden, wie Sie die git-Statusinformationen in der Promptzeile anzeigen lassen k√∂nnen.

NOTE: Was ein Branch ist und wie man sinnvoll damit arbeitet, erkl√§ren wir Ihnen sp√§ter im Semester.
